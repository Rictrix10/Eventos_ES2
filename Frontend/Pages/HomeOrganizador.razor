@page "/home-org/{idUtilizador}/{nome}"
@using Microsoft.AspNetCore.Components
@inject NavigationManager NavigationManager

<h3>Bem-vindo, @nome!</h3>

<button class="btn btn-primary" @onclick="RedirectToEvents">Eventos</button>
<button class="btn btn-primary" @onclick="RedirectToParticipants">Participantes</button>
<button class="btn btn-danger" @onclick="Logout">Logout</button>

@code {
    [Parameter]
    public string IdUtilizador { get; set; }

    [Parameter]
    public string Nome { get; set; }

    private int idUtilizador;
    private string nome;

    protected override void OnInitialized()
    {
        idUtilizador = Convert.ToInt32(IdUtilizador);
        nome = Nome;
    }
    
    private void RedirectToEvents()
    {
        var url = $"/events/{idUtilizador}/{Uri.EscapeDataString(nome)}";
        NavigationManager.NavigateTo(url);
    }

    private void RedirectToParticipants()
    {
        var url = $"/participantes/{idUtilizador}/{Uri.EscapeDataString(nome)}";
        NavigationManager.NavigateTo(url);
    }
    
    private void Logout()
    {
        NavigationManager.NavigateTo("/login");
    }
}
